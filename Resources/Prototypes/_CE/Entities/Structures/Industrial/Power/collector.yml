- type: entity
  abstract: true
  id: CEManaCollectorBase
  categories: [ ForkFiltered ]
  parent: [ BaseMachine, ConstructibleMachine ]
  name: mana collector
  description: A structure that collects ambient magical energy from the environment and stores it for later use.
  placement:
    mode: SnapgridCenter
  components:
  - type: PlacementReplacement
    key: walls
  #- type: AmbientSound
  #  volume: -7
  #  range: 3
  #  sound:
  #    path: /Audio/Ambience/Objects/periodic_beep.ogg
  - type: Sprite
    sprite: _CE/Structures/Industrial/Power/collector.rsi
    snapCardinals: true
    drawdepth: Mobs
    layers:
      - state: base
      - map: ["enum.SmesVisualLayers.Charge"]
        state: "fill-1"
        shader: unshaded
        visible: false
      - state: glass
      - state: top
      - map: ["enum.SmesVisualLayers.Input"]
        state: charging0
        shader: unshaded
      - map: ["enum.SmesVisualLayers.Output"]
        state: dicharging1
        shader: unshaded
  - type: Smes
    chargeOverlayPrefix: fill-
    inputOverlayPrefix: charging
    outputOverlayPrefix: dicharging
    numChargeLevels: 8
  - type: Appearance
  - type: Battery
    startingCharge: 0
    maxCharge: 1000
  - type: ExaminableBattery #TODO Change to mana specific
  - type: NodeContainer
    examinable: true
    nodes:
      input:
        !type:CableTerminalPortNode
        nodeGroupID: HVPower
      output:
        !type:CableDeviceNode
        nodeGroupID: HVPower
  - type: BatteryDischarger
    voltage: High
    node: output
  - type: BatteryCharger
    voltage: High
    node: input
  - type: PowerNetworkBattery
    maxSupply: 10
    maxChargeRate: 10
    supplyRampTolerance: 10
    supplyRampRate: 1
  - type: PointLight
    radius: 1.5
    energy: 1.6
    color: "#309fdf"
    castShadows: false
  - type: Damageable
    damageContainer: StructuralInorganic
    damageModifierSet: StructuralMetallicStrong
  - type: StaticPrice
    price: 100

- type: entity
  parent: CEManaCollectorBase
  id: CEManaCollector
  suffix: Charged
  components:
  - type: Battery
    maxCharge: 1000
    startingCharge: 1000

- type: entity
  parent: CEManaCollectorBase
  id: CEManaCollectorEmpty
  suffix: Empty
  components:
  - type: Battery
    maxCharge: 1000
    startingCharge: 0
